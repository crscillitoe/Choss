<div class="horizontal-center-game">
  <div class="vertical-center-game">
    <div class="board-and-timer">
      <div class="fake-timer timer-width"></div>
      <div
        *ngIf="Board"
        class="vertical-center-game"
        [ngClass]="{
          'our-turn': playerService.isOurTurn(),
          'their-turn': playerService.isTheirTurn(),
          'we-win': playerService.weWin(),
          'they-win': playerService.theyWin()
        }"
      >
        <div class="chess-game">
          <ng-container *ngIf="rows">
            <ng-container *ngIf="playerService.getPlayerTeam() === 0">
              <div *ngFor="let row of rows; let y = index" class="chess-row">
                <div
                  mwlDroppable
                  (drop)="dragService.stopDrag(x + 1, y + 1)"
                  [style.background]="tileService.getColor(x + 1, y + 1)"
                  *ngFor="let row of rows; let x = index"
                  class="chess-tile"
                >
                  <div class="image-wrapper">
                    <img
                      mwlDraggable
                      (dragStart)="dragService.startDrag(x + 1, y + 1)"
                      [src]="tileService.getSVG(x + 1, y + 1)"
                      class="chess-image"
                    />
                    <img
                      [ngClass]="{
                        ghost: !dragService.dragging(x + 1, y + 1),
                        'hacky-chess-image': dragService.dragging(x + 1, y + 1)
                      }"
                      [src]="tileService.getSVG(x + 1, y + 1)"
                    />
                  </div>
                </div>
              </div>
            </ng-container>
            <ng-container *ngIf="playerService.getPlayerTeam() === 1">
              <div *ngFor="let row of rows; let y = index" class="chess-row">
                <div
                  mwlDroppable
                  (drop)="
                    dragService.stopDrag(Board.Width - x, Board.Height - y)
                  "
                  [style.background]="
                    tileService.getColor(Board.Width - x, Board.Height - y)
                  "
                  *ngFor="let row of rows; let x = index"
                  class="chess-tile"
                >
                  <div class="image-wrapper">
                    <img
                      mwlDraggable
                      (dragStart)="
                        dragService.startDrag(Board.Width - x, Board.Height - y)
                      "
                      [src]="
                        tileService.getSVG(Board.Width - x, Board.Height - y)
                      "
                      class="chess-image"
                    />
                    <img
                      [ngClass]="{
                        ghost: !dragService.dragging(
                          Board.Width - x,
                          Board.Height - y
                        ),
                        'hacky-chess-image': dragService.dragging(
                          Board.Width - x,
                          Board.Height - y
                        )
                      }"
                      [src]="
                        tileService.getSVG(Board.Width - x, Board.Height - y)
                      "
                    />
                  </div>
                </div>
              </div>
            </ng-container>
          </ng-container>
        </div>
      </div>

      <div class="timer timer-width">
        <a id="theirtimer" class="monospace time">10:00</a>
        <a id="ourtimer" class="monospace time">10:00</a>
      </div>
    </div>
    <mat-spinner *ngIf="!Board"></mat-spinner>
  </div>
</div>
